openapi: 3.0.0
info:
  title: uspace API docs
  version: 1.0.0
paths:
  "/s3":
    post:
      summary: get s3 bucket link
      description: Get a signed link generated by s3 bucket to allow for direct image upload
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/S3Links"

      responses:
        '200':
          description: Generated links for images
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/S3LinksResponse"

components:
  schemas:
    S3LinksResponse:
      type: object
      additionalProperties:
        required: true
        type: string

      example:
        imageName.jpg: http://images.localhost:9000/images/dummy.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=root%2F20220507%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20220507T123814Z&X-Amz-Expires=604800&X-Amz-Signature=627218060ca95a97b5b0b8413ac00e4eeaf72c7adb746a0b3346e7d59665b807&X-Amz-SignedHeaders=host

    S3Links:
      properties:
        images:
          type: array
      required:
        - images
      example:
        images: [imageName.jpg]
